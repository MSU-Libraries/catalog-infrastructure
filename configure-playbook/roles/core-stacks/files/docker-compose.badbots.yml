---
version: "3.8"
services:
  dummy:
    image: busybox:latest
    command: sleep inf
    networks:
      - public
    deploy:
      mode: replicated
      replicas: 1
      update_config:
        failure_action: rollback
      restart_policy:
        window: 15s
      labels:
        - "traefik.enable=true"
        # Avoid processing requests from bots
        - "traefik.http.middlewares.badbot-block.ipallowlist.sourcerange=127.0.0.1/32"
        # Badbot bouncer dummy service
        - "traefik.http.services.badbot-bouncer.loadbalancer.server.port=9999"
        # >> Tencent IP range with bots throughout: 43.128.0.0/10, 101.32.0.0/14, 123.206.0.0/15
        # >> chinamobile.com 117.48.148.0/22
        # >> China-based Alibaba Cloud Bot 47.76.0.0/16
        # >> some other bot from Singapore: 119.8.160.0/19, 124.243.128.0/18
        # >> spam bot from France: 45.95.233.103 (will probably not last)
        # >> sources of bot scanning with randomized/impossible user agents & absurd facet combos:
        #    - ethr.net: 69.176.80.0/20
        #    - China Mobile Communications: 223.64.0.0/10
        #    - China Mobile Communications: 36.128.0.0/10
        #    - China Mobile Communications: 111.0.0.0/10
        #    - China Mobile Communications: 120.192.0.0/10
        #    - China Mobile Communications: 39.128.0.0/10
        #    - China Mobile Communications: 183.192.0.0/10
        #    - China Mobile Communications: 112.0.0.0/10
        #    - China Mobile Communications: 117.128.0.0/10
        #    - CHINANET HUNAN PROVINCE NETWORK: 223.144.0.0/12
        #    - China Unicom Henan province network: 42.224.0.0/12
        #    - China Unicom Henan province network: 115.48.0.0/12
        #    - DE-SCALEIT-DELTA-23-1: 45.93.184.0/23
        #    - DE-SCALEIT-CHI-23-1: 45.89.148.0/23
        # >> Scanning every link on item pages repeatedly and quickly (citing, email, sms, export, etc)
        #    - Alibaba Cloud LLC: 47.82.8.0/22
        # >> Very high load and suspicious outdated browser version conformity
        #    - Alibaba Cloud LLC: 47.80.0.0/13
        #    - Alibaba Cloud LLC: 47.76.0.0/14
        # >> Very distributed attack from individual IPs scattered across dozens of countries
        #    - UserAgent: Chrome/129.0.0.0 Safari/537.36
        # >> Very distributed attack from individual IPs scattered across dozens of countries with randomized user agents
        #    - 197.232.80.0/22
        #    - 45.70.144.0/22
        #    - 105.158.0.0/16
        #    - 72.27.0.0/16
        #    - 45.185.120.0/22
        #    - 179.96.128.0/20
        #    - 177.22.160.0/20
        #    - 45.228.136.0/22
        #    - 109.225.58.0/24
        #    - 197.32.0.0/14
        #    - 167.250.0.0/16
        #    - 189.68.0.0/15
        #    - 196.65.0.0/16
        #    - 103.126.219.0/24
        #    - 103.156.168.0/23
        #    - 190.15.96.0/19
        #    - 190.115.64.0/22
        #    - 69.79.0.0/16
        #    - 196.191.176.0/22
        #    - 186.193.176.0/20
        #    - 170.83.0.0/16
        #    - 191.5.224.0/21
        #    - 138.0.0.0/16
        #    - 117.102.32.0/19
        #    - 86.40.0.0/14
        #    - 156.215.0.0/16
        #    - 78.185.0.0/16
        #    - 152.59.0.0/16
        #    - 45.225.168.0/22
        #    - 94.74.64.0/18
        #    - 138.121.0.0/16
        #    - 189.12.128.0/18
        #    - 187.255.0.0/16
        #    - 185.244.152.0/23
        #    - 41.104.192.0/19
        #    - 78.136.208.0/18
        #    - 201.51.64.0/18
        #    - 78.173.0.0/16
        #    - 85.108.0.0/16
        #    - 190.113.115.0/25
        #    - 170.84.0.0/16
        #    - 167.62.0.0/16
        #    - 69.240.0.0/12
        #    - 105.160.0.0/14
        #    - 187.104.0.0/14
        #    - 37.215.0.0/21
        #    - 46.250.160.0/19
        #    - 128.201.184.0/24
        #    - 37.107.0.0/16
        #    - 212.47.128.0/19
        #    - 197.185.0.0/16
        #    - 41.44.0.0/14
        #    - 185.187.128.0/22
        #    - 189.4.0.0/14
        #    - 176.88.0.0/16
        #    - 102.40.0.0/16
        #    - 54.36.0.0/14
        #    - 82.36.64.0/22
        #    - 200.152.99.0/25
        #    - 94.141.117.0/24
        #    - 46.184.0.0/18
        #    - 103.92.154.0/24
        #    - 212.124.0.0/21
        #    - 138.204.0.0/16
        #    - 177.32.0.0/14
        #    - 180.251.192.0/18
        #    - 181.124.0.0/14
        #    - 131.196.76.0/22
        #    - 187.86.64.0/20
        #    - 186.26.96.0/22
        #    - 132.255.0.0/16
        #    - 190.133.0.0/16
        #    - 41.60.232.0/21
        #    - 102.219.208.0/24
        #    - 141.0.0.0/8
        #    - 102.219.27.0/24
        #    - 201.17.0.0/16
        #    - 178.204.0.0/15
        #    - 37.106.0.0/16
        #    - 212.92.224.0/20
        #    - 185.97.94.0/24
        #    - 24.184.0.0/14
        #    - 177.131.192.0/19
        #    - 189.60.0.0/14
        #    - 179.127.248.0/21
        #    - 45.228.244.0/22
        #    - 185.89.157.0/24
        #    - 131.72.0.0/16
        #    - 45.164.208.0/22
        #    - 12.154.85.0/29
        #    - 212.154.85.0/29
        #    - 168.121.0.0/16
        #    - 109.87.80.0/24
        #    - 37.61.64.0/18
        #    - 168.194.0.0/16
        #    - 185.206.124.0/24
        #    - 185.244.154.0/23
        #    - 178.186.0.0/17
        #    - 186.65.92.0/22
        #    - 189.113.64.0/20
        #    - 197.16.0.0/13
        #    - 177.132.0.0/14
        #    - 186.194.96.0/20
        #    - 200.80.124.0/22
        #    - 46.40.248.0/22
        #    - 41.108.192.0/18
        #    - 45.6.245.0/26
        #    - 45.224.72.0/22
        #    - 190.123.32.0/21
        #    - 102.208.180.0/22
        #    - 73.0.0.0/8
        #    - 102.135.168.0/21
        #    - 188.191.16.0/20
        #    - 188.72.44.0/19
        #    - 102.64.128.0/17
        #    - 177.223.32.0/20
        #    - 181.204.0.0/14
        #    - 95.10.0.0/16
        #    - 213.139.63.0/26
        #    - 138.122.0.0/16
        #    - 186.216.0.0/18
        #    - 45.174.156.0/22
        #    - 46.103.128.0/17
        #    - 201.62.80.0/20
        #    - 179.24.0.0/13
        #    - 201.131.136.0/21
        #    - 177.192.0.0/14
        #    - 131.221.0.0/16
        #    - 191.223.48.0/20
        #    - 45.179.112.0/22
        #    - 187.19.128.0/17
        #    - 45.184.96.0/22
        #    - 186.232.40.0/21
        #    - 185.71.90.0/23
        #    - 2.56.189.0/26
        #    - 45.165.60.0/22
        #    - 187.0.44.0/22
        #    - 177.55.224.0/20
        #    - 46.150.64.0/19
        #    - 41.251.128.0/18
        #    - 88.230.0.0/16
        #    - 139.135.32.0/19
        #    - 177.104.96.0/20
        # >> User-Agent bot matching: (?i) means case-insensitive match
        - "traefik.http.routers.badbot-https-router.entrypoints=msul-https-ent"
        - "traefik.http.routers.badbot-https-router.middlewares=badbot-block"
        - "traefik.http.routers.badbot-https-router.rule=\
          ClientIP(`43.128.0.0/10`) || ClientIP(`117.48.148.0/22`) || ClientIP(`101.32.0.0/14`) || \
          ClientIP(`123.206.0.0/15`) || ClientIP(`47.76.0.0/16`) || ClientIP(`119.8.160.0/19`) || \
          ClientIP(`124.243.128.0/18`) || ClientIP(`45.95.233.103/32`) || ClientIP(`69.176.80.0/20`) || \
          ClientIP(`223.64.0.0/10`) || ClientIP(`36.128.0.0/10`) || ClientIP(`111.0.0.0/10`) || \
          ClientIP(`120.192.0.0/10`) || ClientIP(`39.128.0.0/10`) || ClientIP(`183.192.0.0/10`) || \
          ClientIP(`112.0.0.0/10`) || ClientIP(`117.128.0.0/10`) || ClientIP(`223.144.0.0/12`) || \
          ClientIP(`42.224.0.0/12`) || ClientIP(`115.48.0.0/12`) || \
          ClientIP(`45.93.184.0/23`) || ClientIP(`45.89.148.0/23`) || \
          ClientIP(`47.82.8.0/22`) || ClientIP(`47.80.0.0/13`) || ClientIP(`47.76.0.0/14`) || \
          ClientIP(`197.232.80.0/22`) || ClientIP(`45.70.144.0/22`) || ClientIP(`105.158.0.0/16`) || ClientIP(`72.27.0.0/16`) || ClientIP(`45.185.120.0/22`) || ClientIP(`179.96.128.0/20`) || ClientIP(`177.22.160.0/20`) || ClientIP(`45.228.136.0/22`) || ClientIP(`109.225.58.0/24`) || ClientIP(`197.32.0.0/14`) || ClientIP(`167.250.0.0/16`) || ClientIP(`189.68.0.0/15`) || ClientIP(`196.65.0.0/16`) || ClientIP(`103.126.219.0/24`) || ClientIP(`103.156.168.0/23`) || ClientIP(`190.15.96.0/19`) || ClientIP(`190.115.64.0/22`) || ClientIP(`69.79.0.0/16`) || ClientIP(`196.191.176.0/22`) || ClientIP(`186.193.176.0/20`) || ClientIP(`170.83.0.0/16`) || ClientIP(`191.5.224.0/21`) || ClientIP(`138.0.0.0/16`) || ClientIP(`117.102.32.0/19`) || ClientIP(`86.40.0.0/14`) || ClientIP(`156.215.0.0/16`) || ClientIP(`78.185.0.0/16`) || ClientIP(`152.59.0.0/16`) || ClientIP(`45.225.168.0/22`) || ClientIP(`94.74.64.0/18`) || ClientIP(`138.121.0.0/16`) || ClientIP(`189.12.128.0/18`) || ClientIP(`187.255.0.0/16`) || ClientIP(`185.244.152.0/23`) || ClientIP(`41.104.192.0/19`) || ClientIP(`78.136.208.0/18`) || ClientIP(`201.51.64.0/18`) || ClientIP(`78.173.0.0/16`) || ClientIP(`85.108.0.0/16`) || ClientIP(`190.113.115.0/25`) || ClientIP(`170.84.0.0/16`) || ClientIP(`167.62.0.0/16`) || ClientIP(`69.240.0.0/12`) || ClientIP(`105.160.0.0/14`) || ClientIP(`187.104.0.0/14`) || ClientIP(`37.215.0.0/21`) || ClientIP(`46.250.160.0/19`) || ClientIP(`128.201.184.0/24`) || ClientIP(`37.107.0.0/16`) || ClientIP(`212.47.128.0/19`) || ClientIP(`197.185.0.0/16`) || ClientIP(`41.44.0.0/14`) || ClientIP(`185.187.128.0/22`) || ClientIP(`189.4.0.0/14`) || ClientIP(`176.88.0.0/16`) || ClientIP(`102.40.0.0/16`) || ClientIP(`54.36.0.0/14`) || ClientIP(`82.36.64.0/22`) || ClientIP(`200.152.99.0/25`) || ClientIP(`94.141.117.0/24`) || ClientIP(`46.184.0.0/18`) || ClientIP(`103.92.154.0/24`) || ClientIP(`212.124.0.0/21`) || ClientIP(`138.204.0.0/16`) || ClientIP(`177.32.0.0/14`) || ClientIP(`180.251.192.0/18`) || ClientIP(`181.124.0.0/14`) || ClientIP(`131.196.76.0/22`) || ClientIP(`187.86.64.0/20`) || ClientIP(`186.26.96.0/22`) || ClientIP(`132.255.0.0/16`) || ClientIP(`190.133.0.0/16`) || ClientIP(`41.60.232.0/21`) || ClientIP(`102.219.208.0/24`) || ClientIP(`141.0.0.0/8`) || ClientIP(`102.219.27.0/24`) || ClientIP(`201.17.0.0/16`) || ClientIP(`178.204.0.0/15`) || ClientIP(`37.106.0.0/16`) || ClientIP(`212.92.224.0/20`) || ClientIP(`185.97.94.0/24`) || ClientIP(`24.184.0.0/14`) || ClientIP(`177.131.192.0/19`) || ClientIP(`189.60.0.0/14`) || ClientIP(`179.127.248.0/21`) || ClientIP(`45.228.244.0/22`) || ClientIP(`185.89.157.0/24`) || ClientIP(`131.72.0.0/16`) || ClientIP(`45.164.208.0/22`) || ClientIP(`12.154.85.0/29`) || ClientIP(`212.154.85.0/29`) || ClientIP(`168.121.0.0/16`) || ClientIP(`109.87.80.0/24`) || ClientIP(`37.61.64.0/18`) || ClientIP(`168.194.0.0/16`) || ClientIP(`185.206.124.0/24`) || ClientIP(`185.244.154.0/23`) || ClientIP(`178.186.0.0/17`) || ClientIP(`186.65.92.0/22`) || ClientIP(`189.113.64.0/20`) || ClientIP(`197.16.0.0/13`) || ClientIP(`177.132.0.0/14`) || ClientIP(`186.194.96.0/20`) || ClientIP(`200.80.124.0/22`) || ClientIP(`46.40.248.0/22`) || ClientIP(`41.108.192.0/18`) || ClientIP(`45.6.245.0/26`) || ClientIP(`45.224.72.0/22`) || ClientIP(`190.123.32.0/21`) || ClientIP(`102.208.180.0/22`) || ClientIP(`73.0.0.0/8`) || ClientIP(`102.135.168.0/21`) || ClientIP(`188.191.16.0/20`) || ClientIP(`188.72.44.0/19`) || ClientIP(`102.64.128.0/17`) || ClientIP(`177.223.32.0/20`) || ClientIP(`181.204.0.0/14`) || ClientIP(`95.10.0.0/16`) || ClientIP(`213.139.63.0/26`) || ClientIP(`138.122.0.0/16`) || ClientIP(`186.216.0.0/18`) || ClientIP(`45.174.156.0/22`) || ClientIP(`46.103.128.0/17`) || ClientIP(`201.62.80.0/20`) || ClientIP(`179.24.0.0/13`) || ClientIP(`201.131.136.0/21`) || ClientIP(`177.192.0.0/14`) || ClientIP(`131.221.0.0/16`) || ClientIP(`191.223.48.0/20`) || ClientIP(`45.179.112.0/22`) || ClientIP(`187.19.128.0/17`) || ClientIP(`45.184.96.0/22`) || ClientIP(`186.232.40.0/21`) || ClientIP(`185.71.90.0/23`) || ClientIP(`2.56.189.0/26`) || ClientIP(`45.165.60.0/22`) || ClientIP(`187.0.44.0/22`) || ClientIP(`177.55.224.0/20`) || ClientIP(`46.150.64.0/19`) || ClientIP(`41.251.128.0/18`) || ClientIP(`88.230.0.0/16`) || ClientIP(`139.135.32.0/19`) || ClientIP(`177.104.96.0/20`) || \
          HeadersRegexp(`User-Agent`, `(?i)(Bytespider|AcademicBotRTU|GoogleOther|Amazonbot|ClaudeBot|GPTBot|FriendlyCrawler|SemrushBot|Diffbot|HawaiiBot|DataForSeoBot)`) || \
          HeadersRegexp(`User-Agent`, `Chrome/129\\.0\\.0\\.0 Safari/537\\.36`)"
        - "traefik.http.routers.badbot-https-router.priority=10000"
        - "traefik.http.routers.badbot-https-router.tls=true"
        - "traefik.http.routers.badbot-https-router.service=badbot-bouncer"

networks:
  public:
    name: public
    external: true
