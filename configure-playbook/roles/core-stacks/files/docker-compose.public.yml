---
version: "3.8"
services:
  # Stack deploys require a network be used by at least 1 service
  # or Swarm will skip creating that network. Hence this service.
  health:
    image: alpine:latest
    command: sleep inf
    networks:
      - public
    cap_drop:
      - NET_ADMIN
      - SYS_ADMIN
    deploy:
      mode: replicated
      replicas: 1
      restart_policy:
        window: 15s
      update_config:
        failure_action: rollback
      resources:
        limits:
          cpus: '0.25'
          memory: 20M

networks:
  public:
    name: public
    driver: overlay
    ipam:
      config:
        - subnet: 192.168.0.0/24
