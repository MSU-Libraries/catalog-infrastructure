terraform {
    backend "s3" {
        bucket = "EXAMPLE-terraform-states"
        key    = "catalog/shared.tfstate"
        region = "us-east-2"
    }
}

module "shared" {
  source          = "../../module/shared"
  aws_region      = "us-east-1"
  mail_instance   = "catalog-prod"
  shared_name     = "catalog"
  alert_emails    = [
    "myemail@example.edu"
  ]
  vpc_cidr        = "10.1.0.0/16"
  zone_subnets    = {
    "a" = "10.1.1.0/24"
    "b" = "10.1.2.0/24"
    "c" = "10.1.3.0/24"
  }
  zone_id         = "ZXXXXXXXXXXXXXXXXXXX"
  domain          = "example.edu"
}

output "smtp_host" {
  description = "Hostname for SES SMTP access"
  value       = module.shared.smtp_host
}

output "smtp_username" {
  description = "Username for SES SMTP access"
  value       = module.shared.smtp_username
}

output "smtp_password" {
  description = "Password for SES SMTP access"
  value       = module.shared.smtp_password
  sensitive   = true
}

output "alert_topic_arn" {
  description = "SNS topic ARN to send alerts to"
  value       = module.shared.alert_topic_arn
}

output "vpc_cidr" {
  description = "The CIDR for the VPC, the same as passed variable input"
  value       = module.shared.vpc_cidr
}

output "vpc_id" {
  description = "The created vpc.id"
  value       = module.shared.vpc_id
}

output "efs_security_group_id" {
  description = "The security group id to allow access to EFS mount"
  value       = module.shared.efs_security_group_id
}

output "efs_mount_hostnames" {
  description = "EFS mount target hostnames for each availability zone"
  value       = module.shared.efs_mount_hostnames
}

output "zone_subnet_ids" {
  description = "Subnet IDs for each availability zone"
  value       = module.shared.zone_subnet_ids
}

output "zone_id" {
  description = "The zone_id in AWS Route53 for which the domain is associated"
  value       = module.shared.zone_id
}

output "domain" {
  description = "The domain within which the servers will reside"
  value       = module.shared.domain
}
